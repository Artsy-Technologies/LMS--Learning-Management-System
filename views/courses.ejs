<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Grad.LMS - Courses</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    <style>
        .page-header {
            background: linear-gradient(rgba(24, 29, 56, .7), rgba(24, 29, 56, .7)), url(img/courses.png) !important;
            background-position: center center !important;
            background-repeat: no-repeat !important;
            background-size: cover !important;
        }
</style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg bg-white navbar-light shadow sticky-top p-0">
        <a href="/" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
            <h2 class="m-0 text-primary"><i class="fa fa-book me-3"></i>Grad.LMS</h2>
        </a>
        <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ms-auto p-4 p-lg-0">
                <a href="/" class="nav-item nav-link">Home</a>
                <a href="/about" class="nav-item nav-link">About</a>
                <a href="/courses" class="nav-item nav-link active">Courses</a>
                <a href="/contact" class="nav-item nav-link">Contact</a>
            </div>
            <a href="/select" class="btn btn-primary py-4 px-lg-5 d-none d-lg-block">Join Now<i class="fa fa-arrow-right ms-3"></i></a>
        </div>
    </nav>
    <!-- Navbar End -->


    <!-- Header Start -->
    <div class="container-fluid bg-primary py-5 mb-5 page-header">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10 text-center">
                    <h1 class="display-3 text-white animated slideInDown">Courses</h1>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->


    <!-- Filter Section -->
    <div class="container py-5">
        <div class="wow fadeInUp bg-light rounded p-4 mb-5" data-wow-delay="0.1s">
            <div class="row align-items-center">
                <div class="col-md-6 mb-3 mb-md-0">
                    <div class="position-relative">
                        <input type="text" class="form-control" id="searchInput" placeholder="Search courses...">
                        <i class="fa fa-search position-absolute end-0 top-50 translate-middle-y me-3"></i>
                    </div>
                </div>
                <div class="col-md-4 mb-3 mb-md-0">
                    <select class="form-select" id="instituteFilter">
                        <option value="">All Institutes</option>
                        <% 
                            const instituteNames = new Set(); 
                            if (typeof videos !== 'undefined') {
                                videos.forEach(video => {
                                    if (video.teacherId && video.teacherId.institute) {
                                        instituteNames.add(video.teacherId.institute);
                                    }
                                });
                                instituteNames.forEach(name => { 
                        %>
                            <option value="<%= name %>"><%= name %></option>
                        <% }); } %>
                    </select>
                </div>
                <div class="col-md-2">
                    <span class="badge bg-primary rounded-pill">
                        <i class="fa fa-video me-1"></i> <span id="courseCount">0</span> Courses
                    </span>
                </div>
            </div>
        </div>
    </div>


    <!-- Courses Start -->
    <div class="container-xxl category">
        <div class="container">
            <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
                <h6 class="section-title bg-white text-center text-primary px-3">Courses</h6>
                <h1 class="mb-5">Available Courses</h1>
            </div>
            <div class="row g-4" id="coursesContainer">
                <% if (typeof videos !== 'undefined' && videos.length > 0) { %>
                    <% videos.forEach(function(video, index) { %>
                        <div class="col-lg-4 col-md-6 course-item"
                              data-name="<%= (video.title || video.videoName || '').toLowerCase() %>"
                             data-institute="<%= video.teacherId && video.teacherId.institute ? video.teacherId.institute : '' %>">
                            <div class="card h-100 shadow-sm border-0 wow fadeInUp" data-wow-delay="0.<%= index + 1 %>s">
                                <% if (video.filename) { %>
                                    <div class="ratio ratio-16x9 rounded-top overflow-hidden">
                                        <video src="/uploads/<%= video.filename %>#t=0.5"
                                                preload="metadata"
                                                muted
                                                playsinline
                                                style="width: 100%; height: 100%; object-fit: cover;">
                                            Your browser does not support HTML5 video.
                                        </video>
                                    </div>
                                <% } else { %>
                                    <div class="ratio ratio-16x9 rounded-top overflow-hidden bg-secondary d-flex align-items-center justify-content-center">
                                        <i class="fa fa-video text-white" style="font-size: 3rem;"></i>
                                    </div>
                                <% } %>
                                <div class="card-body text-center">
                                    <h5 class="card-title mb-2"><%= video.title || video.videoName || 'Untitled Video' %></h5>
                                    <% if (video.teacherId && video.teacherId.institute) { %>
                                        <p class="text-muted small institute-name mb-2">
                                            <i class="fa fa-university me-1"></i>
                                            <strong><%= video.teacherId.institute %></strong>
                                        </p>
                                    <% } %>
                                    <% if (video.teacherId && video.teacherId.sname) { %>
                                        <p class="text-muted small teacher-name mb-1">
                                            <i class="fa fa-user me-1"></i>
                                            <%= video.teacherId.sname %>
                                        </p>
                                    <% } %>
                                    <% if (video.description || video.videoDescription) { %>
                                        <p class="text-muted small"><%= video.description || video.videoDescription %></p>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <div class="col-12 text-center">
                        <div class="empty-state">
                            <i class="fa fa-video-slash" style="font-size: 3rem; color: #6c757d; margin-bottom: 1rem;"></i>
                            <h4>No courses available at the moment.</h4>
                            <p>Check back later for new content.</p>
                        </div>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
    <!-- Courses End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-white mb-3">Quick Links</h4>
                    <a class="btn btn-link" href="/about">About Us</a>
                    <a class="btn btn-link" href="/contact">Contact Us</a>
                    <a class="btn btn-link" href="/contact">Privacy Policy</a>
                    <a class="btn btn-link" href="/about">Terms & Conditions</a>
                    <a class="btn btn-link" href="/about">FAQs & Help</a>
                </div>
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-white mb-3">Contact Info</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Gokulam, Mysuru</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+91 123-456-7890</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>contact@gradlms.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <h4 class="text-white mb-3">Our Features</h4>
                    <p class="mb-2"><i class="fa fa-check me-3"></i>100% Secure Platform</p>
                    <p class="mb-2"><i class="fa fa-check me-3"></i>Extensive Book Library</p>
                    <p class="mb-2"><i class="fa fa-check me-3"></i>Quality Educational Videos</p>
                    <p class="mb-2"><i class="fa fa-check me-3"></i>Teacher-Student Connections</p>
                    <p class="mb-2"><i class="fa fa-check me-3"></i>24/7 Learning Access</p>
                </div>
            </div>
        </div>
        
        <!-- Added space between footer content and copyright -->
        <div style="height: 40px;"></div>
        
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Grad.LMS</a>, All Rights Reserved. Designed By <a class="border-bottom" href="">ABC & Team</a>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FAQs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    <script>
document.addEventListener('DOMContentLoaded', function() {
    updateCourseCount();
    
    // Setup event listeners
    document.getElementById('searchInput').addEventListener('input', filterCourses);
    
    // Check if instituteFilter exists before adding listener
    const instituteFilter = document.getElementById('instituteFilter');
    if (instituteFilter) {
        instituteFilter.addEventListener('change', filterCourses);
    }
});

function filterCourses() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
    const instituteFilter = document.getElementById('instituteFilter');
    const selectedInstitute = instituteFilter ? instituteFilter.value : '';
    const courses = document.querySelectorAll('.course-item');

    courses.forEach(course => {
        const name = course.dataset.name || '';
        const institute = course.dataset.institute || '';
        
        const matchesSearch = name.includes(searchTerm);
        const matchesInstitute = !selectedInstitute || institute.includes(selectedInstitute);
        
        course.style.display = matchesSearch && matchesInstitute ? '' : 'none';
    });

    updateCourseCount();
}

function updateCourseCount() {
    const visibleCourses = document.querySelectorAll('.course-item:not([style*="display: none"])').length;
    const courseCountElement = document.getElementById('courseCount');
    if (courseCountElement) {
        courseCountElement.textContent = visibleCourses;
    }
    
    // Show/hide empty state
    const coursesContainer = document.getElementById('coursesContainer');
    let emptyState = coursesContainer.querySelector('.empty-state');
    
    if (visibleCourses === 0 && coursesContainer.querySelector('.course-item')) {
        if (!emptyState) {
            const emptyDiv = document.createElement('div');
            emptyDiv.className = 'col-12 text-center empty-state';
            emptyDiv.innerHTML = `
                <div class="empty-state">
                    <i class="fa fa-search" style="font-size: 3rem; color: #6c757d; margin-bottom: 1rem;"></i>
                    <h4>No Courses Found</h4>
                    <p>Try adjusting your search criteria.</p>
                </div>
            `;
            coursesContainer.appendChild(emptyDiv);
        } else {
            emptyState.style.display = 'block';
        }
    } else if (emptyState) {
        emptyState.style.display = 'none';
    }
}
</script>

</body>

</html>